import{r,e as F,b as k}from"./app-C07MtfD9.js";import{d as A,$ as B,_ as W,h as z}from"./index-DnQoircM.js";function g(e,t,{checkForDefaultPrevented:s=!0}={}){return function(o){if(e==null||e(o),s===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function se(e,t){const s=r.createContext(t);function n(i){const{children:l,...c}=i,u=r.useMemo(()=>c,Object.values(c));return r.createElement(s.Provider,{value:u},l)}function o(i){const l=r.useContext(s);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return n.displayName=e+"Provider",[n,o]}function re(e,t=[]){let s=[];function n(i,l){const c=r.createContext(l),u=s.length;s=[...s,l];function a(d){const{scope:b,children:$,...m}=d,y=(b==null?void 0:b[e][u])||c,p=r.useMemo(()=>m,Object.values(m));return r.createElement(y.Provider,{value:p},$)}function f(d,b){const $=(b==null?void 0:b[e][u])||c,m=r.useContext($);if(m)return m;if(l!==void 0)return l;throw new Error(`\`${d}\` must be used within \`${i}\``)}return a.displayName=i+"Provider",[a,f]}const o=()=>{const i=s.map(l=>r.createContext(l));return function(c){const u=(c==null?void 0:c[e])||i;return r.useMemo(()=>({[`__scope${e}`]:{...c,[e]:u}}),[c,u])}};return o.scopeName=e,[n,K(o,...t)]}function K(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const l=n.reduce((c,{useScope:u,scopeName:a})=>{const d=u(i)[`__scope${a}`];return{...c,...d}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return s.scopeName=t.scopeName,s}function h(e){const t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...s)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...s)},[])}function ie({prop:e,defaultProp:t,onChange:s=()=>{}}){const[n,o]=j({defaultProp:t,onChange:s}),i=e!==void 0,l=i?e:n,c=h(s),u=r.useCallback(a=>{if(i){const d=typeof a=="function"?a(e):a;d!==e&&c(d)}else o(a)},[i,e,o,c]);return[l,u]}function j({defaultProp:e,onChange:t}){const s=r.useState(e),[n]=s,o=r.useRef(n),i=h(t);return r.useEffect(()=>{o.current!==n&&(i(n),o.current=n)},[n,o,i]),s}function X(e,t=globalThis==null?void 0:globalThis.document){const s=h(e);r.useEffect(()=>{const n=o=>{o.key==="Escape"&&s(o)};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)},[s,t])}const x="dismissableLayer.update",q="dismissableLayer.pointerDownOutside",G="dismissableLayer.focusOutside";let w;const J=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ce=r.forwardRef((e,t)=>{var s;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...a}=e,f=r.useContext(J),[d,b]=r.useState(null),$=(s=d==null?void 0:d.ownerDocument)!==null&&s!==void 0?s:globalThis==null?void 0:globalThis.document,[,m]=r.useState({}),y=A(t,v=>b(v)),p=Array.from(f.layers),[I]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),U=p.indexOf(I),N=d?p.indexOf(d):-1,_=f.layersWithOutsidePointerEventsDisabled.size>0,T=N>=U,M=Q(v=>{const E=v.target,S=[...f.branches].some(O=>O.contains(E));!T||S||(i==null||i(v),c==null||c(v),v.defaultPrevented||u==null||u())},$),D=Y(v=>{const E=v.target;[...f.branches].some(O=>O.contains(E))||(l==null||l(v),c==null||c(v),v.defaultPrevented||u==null||u())},$);return X(v=>{N===f.layers.size-1&&(o==null||o(v),!v.defaultPrevented&&u&&(v.preventDefault(),u()))},$),r.useEffect(()=>{if(d)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(w=$.body.style.pointerEvents,$.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(d)),f.layers.add(d),L(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&($.body.style.pointerEvents=w)}},[d,$,n,f]),r.useEffect(()=>()=>{d&&(f.layers.delete(d),f.layersWithOutsidePointerEventsDisabled.delete(d),L())},[d,f]),r.useEffect(()=>{const v=()=>m({});return document.addEventListener(x,v),()=>document.removeEventListener(x,v)},[]),r.createElement(B.div,W({},a,{ref:y,style:{pointerEvents:_?T?"auto":"none":void 0,...e.style},onFocusCapture:g(e.onFocusCapture,D.onFocusCapture),onBlurCapture:g(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:g(e.onPointerDownCapture,M.onPointerDownCapture)}))});function Q(e,t=globalThis==null?void 0:globalThis.document){const s=h(e),n=r.useRef(!1),o=r.useRef(()=>{});return r.useEffect(()=>{const i=c=>{if(c.target&&!n.current){let a=function(){R(q,s,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=a,t.addEventListener("click",o.current,{once:!0})):a()}else t.removeEventListener("click",o.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,s]),{onPointerDownCapture:()=>n.current=!0}}function Y(e,t=globalThis==null?void 0:globalThis.document){const s=h(e),n=r.useRef(!1);return r.useEffect(()=>{const o=i=>{i.target&&!n.current&&R(G,s,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function L(){const e=new CustomEvent(x);document.dispatchEvent(e)}function R(e,t,s,{discrete:n}){const o=s.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&o.addEventListener(e,t,{once:!0}),n?z(o,i):o.dispatchEvent(i)}const C=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{},Z=F.useId||(()=>{});let H=0;function ue(e){const[t,s]=r.useState(Z());return C(()=>{s(n=>n??String(H++))},[e]),t?`radix-${t}`:""}function V(e,t){return r.useReducer((s,n)=>{const o=t[s][n];return o??s},e)}const ee=e=>{const{present:t,children:s}=e,n=te(t),o=typeof s=="function"?s({present:n.isPresent}):r.Children.only(s),i=A(n.ref,o.ref);return typeof s=="function"||n.isPresent?r.cloneElement(o,{ref:i}):null};ee.displayName="Presence";function te(e){const[t,s]=r.useState(),n=r.useRef({}),o=r.useRef(e),i=r.useRef("none"),l=e?"mounted":"unmounted",[c,u]=V(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const a=P(n.current);i.current=c==="mounted"?a:"none"},[c]),C(()=>{const a=n.current,f=o.current;if(f!==e){const b=i.current,$=P(a);e?u("MOUNT"):$==="none"||(a==null?void 0:a.display)==="none"?u("UNMOUNT"):u(f&&b!==$?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),C(()=>{if(t){const a=d=>{const $=P(n.current).includes(d.animationName);d.target===t&&$&&k.flushSync(()=>u("ANIMATION_END"))},f=d=>{d.target===t&&(i.current=P(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:r.useCallback(a=>{a&&(n.current=getComputedStyle(a)),s(a)},[])}}function P(e){return(e==null?void 0:e.animationName)||"none"}export{re as $,g as a,ee as b,ie as c,ue as d,ce as e,h as f,se as g,C as h};
