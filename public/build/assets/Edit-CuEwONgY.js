import{r as c,q as P,W as C,j as e,y as F}from"./app-C07MtfD9.js";import{I as n}from"./InputTextLabelEdit-COO_sPqI.js";import{S as u}from"./SelectOptionCustom-CSUwiwcJ.js";import{a as I,P as D,T as q}from"./TextEditor-CI-qQxNt.js";import{B as x}from"./button-K6EJszCp.js";import{D as S,a as T,b as M,c as L,d as R}from"./dialog-LoRgiMNL.js";import{L as E}from"./label-AaBqyT4Z.js";import{S as O}from"./square-pen-CxfHIGZw.js";import{P as H}from"./pen-CMKbJodX.js";import{D as V}from"./door-open-D4J6vbOz.js";import"./input-D9iw22-Q.js";import"./index-DnQoircM.js";import"./circle-alert-CR7MK8J5.js";import"./createLucideIcon-BUGSgSYX.js";import"./index-dqQXyb1b.js";import"./index-Cs2ZRB6I.js";import"./Combination-DJiwtqFM.js";import"./x-bUUQcknQ.js";const ne=({product:i})=>{const[b,d]=c.useState(!1),{subProductCategories:j}=P().props,{data:a,setData:l,errors:r,processing:_,reset:B}=C({name:i.name,description:i.description,image:i.image,thickness:i.thickness,range:i.range,pcs:i.pcs||"",price:i.price,width:i.width||"",height:i.height||"",type:i.type,price_per_square_meter:i.price_per_square_meter,sub_product_category_id:i.sub_product_category_id});c.useEffect(()=>{l({...a,name:i.name,description:i.description,image:i.image,thickness:i.thickness,range:i.range,pcs:i.pcs||"",price:i.price,width:i.width||"",height:i.height||"",price_per_square_meter:i.price_per_square_meter,sub_product_category_id:i.sub_product_category_id})},[i]);const v=t=>{t.preventDefault(),F.post(route("admin.product.update",i.id),{...a,_method:"put",forceFormData:!0},{preserveScroll:!0})},[m,g]=c.useState(null),f=t=>{const s=t.target.files[0];l({...a,image:s});const o=new FileReader;o.onloadend=()=>{g(o.result)},s?o.readAsDataURL(s):g(null)},N=t=>{const s=t.target.value;l({...a,width:s})},w=t=>{const s=t.target.value;l({...a,height:s})},y=t=>{const s=t.target.value;l({...a,width:s})},k=t=>{const s=t.target.value;l({...a,height:s})};c.useEffect(()=>{const t=a.pcs,s=parseFloat(a.width),o=parseFloat(a.height);if(!isNaN(s)&&!isNaN(o)&&!isNaN(t)&&a.type==="box"&&t>0){const p=t*s*o/1e4,h=parseFloat(p.toFixed(3));l({...a,range:h})}else if(!isNaN(s)&&!isNaN(o)&&!isNaN(t)&&a.type==="roll"){const p=s*o,h=parseFloat(p.toFixed(3));l({...a,range:h})}},[a.width,a.height,a.pcs]);const z=[2,4];return e.jsx(e.Fragment,{children:e.jsxs(S,{open:b,onOpenChange:d,children:[e.jsx(T,{asChild:!0,children:e.jsx(x,{variant:"outline",onClick:()=>d(!0),size:"sm",className:" hover:bg-orange-200 border-orange-500",children:e.jsx(O,{className:"h-4 w-4 text-orange-500"})})}),e.jsxs(M,{className:" max-w-[340px] z-[120] sm:max-w-[600px] h-[85vh]  rounded-lg overflow-auto bg-white",children:[e.jsx(L,{children:e.jsx(R,{className:"py-3 text-xl",children:"Update Produk"})}),e.jsx("div",{className:"bg-white mt-2",children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"flex flex-col gap-4 ",children:[e.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[e.jsx("div",{className:"flex items-center  w-full justify-center mt-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{className:" object-cover h-52 w-60 border-2 rounded-xl",src:m||window.location.origin+"/storage/"+a.image}),e.jsx("label",{htmlFor:"foto",className:"font-semibold text-sm",children:e.jsx(H,{className:"absolute size-10 cursor-pointer text-white p-2 rounded-full bg-blue-500 -right-3 -bottom-3"})})]})}),e.jsx("div",{className:" items-center gap-2 hidden",children:e.jsx("input",{id:"foto",type:"file",className:"w-full px-4 py-2",name:"foto",onChange:t=>f(t)})}),e.jsx("span",{className:"text-red-600",children:r.image})]}),e.jsx(n,{variant:"wajib",labelFor:"name",labelText:"Nama Produk",inputId:"name",error:`${r&&r.name===void 0?"":r.name}`,inputProps:{name:"name",value:a.name,type:"text",placeholder:"Masukkan produk",onChange:t=>{l({...a,name:t.target.value})}},children:e.jsx(V,{className:" size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),e.jsx(n,{variant:"wajib",labelFor:"price_per_square_meter",labelText:"Harga/m2",error:r&&r.price_per_square_meter?r.price_per_square_meter:"",inputId:"price_per_square_meter",inputProps:{value:a.price_per_square_meter!==""&&!isNaN(a.price_per_square_meter)?parseInt(a.price_per_square_meter).toLocaleString("id-ID"):"",name:"price_per_square_meter",type:"text",placeholder:"Masukkan harga/m2",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l({...a,price_per_square_meter:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsx(n,{variant:"wajib",labelFor:"thickness",labelText:"Ketebalan",error:r&&r.thickness?r.thickness:"",inputId:"thickness",inputProps:{value:a.thickness,name:"thickness",type:"text",placeholder:"Masukkan ketebalan (3 mm)",onChange:t=>{l({...a,thickness:t.target.value})}},children:e.jsx(I,{className:" size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),a.type==="box"?e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"wajib",labelFor:"price",labelText:"Harga/box",error:r&&r.price?r.price:"",inputId:"price",inputProps:{value:a.price!==""&&!isNaN(a.price)?parseInt(a.price).toLocaleString("id-ID"):"",name:"price",type:"text",placeholder:"Masukkan harga/box",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l({...a,price:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{variant:"wajib",labelFor:"pcs",labelText:"Pcs",error:r&&r.pcs?r.pcs:"",inputId:"pcs",inputProps:{value:a.pcs,name:"pcs",type:"number",placeholder:"Masukkan pcs (20 pcs)",onChange:t=>{l({...a,pcs:t.target.value})}},children:e.jsx(D,{className:" size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),e.jsxs(n,{variant:"wajib",labelFor:"height",labelText:"Panjang",error:r&&r.height?r.height:"",inputId:"height",inputProps:{value:a.height,name:"height",type:"number",placeholder:"20 cm",onChange:w},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"P"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"cm"})]})," ",e.jsxs(n,{variant:"wajib",labelFor:"width",labelText:"Lebar",error:r&&r.width?r.width:"",inputId:"width",inputProps:{value:a.width,name:"width",type:"number",placeholder:"20 cm",onChange:N},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"L"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"cm"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{labelFor:"price",labelText:"Harga/roll",variant:"wajib",error:r&&r.price?r.price:"",inputId:"price",inputProps:{value:a.price!==""&&!isNaN(a.price)?parseInt(a.price).toLocaleString("id-ID"):"",name:"price",type:"text",placeholder:"Masukkan harga/roll",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l({...a,price:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(n,{variant:"wajib",labelFor:"height",labelText:"Panjang",error:r&&r.height?r.height:"",inputId:"height",inputProps:{value:a.height,name:"height",type:"number",placeholder:"20 cm",onChange:k},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"P"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"m"})]})," ",e.jsx(u,{variant:"wajib",optionName:"pilih lebar",htmlFor:"product_id",labelName:"Lebar",optionMap:z.map((t,s)=>e.jsxs("option",{value:t.valueOf(),children:[t.valueOf()," ","m"]},s)),errors:r.width,selectOptionProps:{value:a.width,name:"width",type:"number",onChange:y}})]})]}),e.jsxs(n,{labelFor:"range",labelText:"Jangkauan",error:r&&r.range?r.range:"",inputId:"range",inputProps:{disabled:!0,value:a.range,name:"range",type:"number",placeholder:"Masukkan jangkauan",onChange:t=>{l({...a,range:t.target.value})}},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"m"}),e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"m2"})]}),e.jsx(u,{optionName:"Pilih Sub Kategori Produk",variant:"wajib",htmlFor:"sub_product_category_id",labelName:"Sub Kategori Produk",optionMap:j.map((t,s)=>e.jsx("option",{value:t.id,children:t.name},s)),errors:r.sub_product_category_id,selectOptionProps:{name:"sub_product_category_id",value:a.sub_product_category_id,onChange:t=>{l({...a,sub_product_category_id:t.target.value})}}}),e.jsxs("div",{className:"flex flex-col gap-3 mt-2 text-sm",children:[e.jsx(E,{variant:"wajib",htmlFor:"description",children:"Deskripsi Produk"}),e.jsx(q,{value:a.description,onChange:t=>{l({...a,description:t})}}),r.description&&e.jsx("span",{className:"text-red-500",children:r.description})]})]}),e.jsx("div",{className:"mt-8 w-full flex gap-4 items-center justify-end",children:e.jsx(x,{className:"w-1/2",disabled:_,type:"submit",children:"Save"})})]})})]})]})})};export{ne as default};
