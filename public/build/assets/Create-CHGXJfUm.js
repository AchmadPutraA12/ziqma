import{j as e,W as M,q as R,r as p}from"./app-C07MtfD9.js";import{I as i}from"./InputTextLabel-CREInD15.js";import{T as D,a as V,P as E}from"./TextEditor-CI-qQxNt.js";import{B as f}from"./button-K6EJszCp.js";import{L as _}from"./label-AaBqyT4Z.js";import{I as g}from"./InputError-CfwsiH9i.js";import{S as y}from"./SelectOptionCustom-CSUwiwcJ.js";import{S as H}from"./Spinner-D-OdtiWW.js";import{S as B}from"./square-menu-CghZIkhs.js";import{c as O}from"./createLucideIcon-BUGSgSYX.js";import{I as U}from"./image-jmDFSvHq.js";import{C as G}from"./circle-x-CD0nG8Vy.js";import"./input-D9iw22-Q.js";import"./index-DnQoircM.js";import"./circle-alert-CR7MK8J5.js";/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=O("GanttChart",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]),$=({selectedGender:o,title:a,onChange:l,className:u})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(_,{children:a}),e.jsxs("div",{className:`flex items-center gap-2 ${u}`,children:[e.jsxs("label",{htmlFor:"roll",className:`flex items-center gap-2 border bg-background rounded-lg px-4 py-2 cursor-pointer ${o==="roll"?"border-primary":"border-gray-700"}`,children:[e.jsx("input",{type:"radio",id:"roll",name:"gender",className:"focus:ring-0 focus:ring-purple-500 focus:ring-offset-0 text-primary",value:"roll",checked:o==="roll",onChange:l}),e.jsx("span",{className:"text-sm cursor-pointer",children:"roll"})]}),e.jsxs("label",{htmlFor:"box",className:`flex items-center gap-2 border bg-background rounded-lg px-4 py-2 cursor-pointer ${o==="box"?"border-primary":"border-gray-700"}`,children:[e.jsx("input",{type:"radio",id:"box",name:"gender",className:"focus:ring-0 focus:ring-purple-500 focus:ring-offset-0 text-primary",value:"box",checked:o==="box",onChange:l}),e.jsx("span",{className:"text-sm cursor-pointer",children:"box"})]})]})]}),N="/build/assets/no_image-BVqnqXJZ.jpg",ne=({onSuccess:o})=>{const{data:a,setData:l,post:u,processing:x,errors:t,reset:w}=M({name:"",description:"",image:null,thickness:"",range:"",pcs:"",sub_product_category_id:"",price:"",price_per_square_meter:"",width:"",height:"",type:"box"}),{subProductCategories:k}=R().props,[b,d]=p.useState(null),z=r=>{var n;const s=(n=r.target.files)==null?void 0:n[0];if(s){const c=URL.createObjectURL(s);d(c),l({...a,image:s})}};p.useEffect(()=>{a.description==="<p>Tidak ada deskripsi</p>"?(l(r=>({...r,image:N})),d(N)):(d(null),l(r=>({...r,image:null})))},[a.description]);const P=r=>{const s=r.target.value;l({...a,pcs:s})},I=r=>{const s=r.target.value;l({...a,width:s})},C=r=>{const s=r.target.value;l({...a,height:s})},F=r=>{const s=r.target.value;l({...a,width:s})},S=r=>{const s=r.target.value;l({...a,height:s})};p.useEffect(()=>{const r=a.pcs,s=parseFloat(a.width),n=parseFloat(a.height);if(!isNaN(s)&&!isNaN(n)&&!isNaN(r)&&a.type==="box"&&r>0){const c=r*s*n/1e4,h=parseFloat(c.toFixed(3));l({...a,range:h})}else if(!isNaN(s)&&!isNaN(n)&&!isNaN(r)&&a.type==="roll"){const c=s*n,h=parseFloat(c.toFixed(3));l({...a,range:h})}},[a.width,a.height,a.pcs]);const T=r=>{r.preventDefault(),u(route("admin.product.store"),{forceFormData:!0,onSuccess:()=>{w("name","image"),o("someNewTabValue")},preserveScroll:!0})},[j,m]=p.useState(a.type);p.useEffect(()=>(m(a.type),()=>{m(a.type)}),[j]);const q=r=>{l({...a,type:r.target.value}),m(r.target.value)},L=[2,4];return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:T,className:"flex flex-col gap-4 mt-6 p-4 bg-gray-50 border rounded-lg lg:w-4/5",children:[e.jsx(i,{variant:"wajib",labelFor:"name",labelText:"Nama produk",error:t&&t.name?t.name:"",inputId:"name",inputProps:{value:a.name,name:"name",type:"text",placeholder:"Masukkan produk",onChange:r=>{l({...a,name:r.target.value})}},children:e.jsx(B,{className:"size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),e.jsxs("div",{className:"flex flex-col gap-3 mt-2",children:[e.jsx(_,{variant:"optional",htmlFor:"desc",children:"Deskripsi Produk"}),e.jsx(D,{value:a.description,onChange:r=>{l({...a,description:r})}}),e.jsx(g,{message:t.description})]}),e.jsx(i,{variant:"wajib",labelFor:"price_per_square_meter",labelText:"Harga/m2",error:t&&t.price_per_square_meter?t.price_per_square_meter:"",inputId:"price_per_square_meter",inputProps:{value:a.price_per_square_meter!==""&&!isNaN(a.price_per_square_meter)?parseInt(a.price_per_square_meter).toLocaleString("id-ID"):"",name:"price_per_square_meter",type:"text",placeholder:"Masukkan harga/m2",onChange:r=>{const s=r.target.value.replace(/\D/g,"");l({...a,price_per_square_meter:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsx(i,{variant:"wajib",labelFor:"thickness",labelText:"Ketebalan",error:t&&t.thickness?t.thickness:"",inputId:"thickness",inputProps:{value:a.thickness,name:"thickness",type:"text",placeholder:"Masukkan ketebalan (3 mm)",onChange:r=>{l({...a,thickness:r.target.value})}},children:e.jsx(V,{className:"size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),e.jsx($,{title:"Tipe Produk",selectedGender:a.type,onChange:q}),t.type&&e.jsx(g,{message:t.type,className:"mt-2"})," ",j==="box"?e.jsxs("div",{className:" p-4 border flex flex-col gap-3 rounded-lg bg-yellow-200",children:[" ",e.jsx(i,{variant:"wajib",labelFor:"price",labelText:"Harga/box",error:t&&t.price?t.price:"",inputId:"price",inputProps:{value:a.price!==""&&!isNaN(a.price)?parseInt(a.price).toLocaleString("id-ID"):"",name:"price",type:"text",placeholder:"Masukkan harga/box",onChange:r=>{const s=r.target.value.replace(/\D/g,"");l({...a,price:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[e.jsx(i,{variant:"wajib",labelFor:"pcs",labelText:"Pcs",error:t&&t.pcs?t.pcs:"",inputId:"pcs",inputProps:{value:a.pcs,name:"pcs",type:"number",placeholder:"Masukkan pcs (20 pcs)",onChange:P},children:e.jsx(E,{className:"size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})}),e.jsxs(i,{variant:"wajib",labelFor:"height",labelText:"Panjang",error:t&&t.height?t.height:"",inputId:"height",inputProps:{value:a.height,name:"height",type:"number",placeholder:"20",onChange:C},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"P"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"cm"})]}),e.jsxs(i,{variant:"wajib",labelFor:"width",labelText:"Lebar",error:t&&t.width?t.width:"",inputId:"width",inputProps:{value:a.width,name:"width",type:"number",placeholder:"20",onChange:I},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"L"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"cm"})]}),e.jsxs(i,{labelFor:"range",labelText:"Jangkauan",error:t&&t.range?t.range:"",inputId:"range",inputProps:{disabled:!0,value:a.range,name:"range",type:"text",placeholder:"hasil dari P x L x Pcs"},children:[e.jsx(v,{className:"size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"m2"})]})]})]}):e.jsxs("div",{className:" p-4 border flex flex-col gap-3 rounded-lg bg-yellow-200",children:[" ",e.jsx(i,{variant:"wajib",labelFor:"price",labelText:"Harga/Roll",error:t&&t.price?t.price:"",inputId:"price",inputProps:{value:a.price!==""&&!isNaN(a.price)?parseInt(a.price).toLocaleString("id-ID"):"",name:"price",type:"text",placeholder:"Masukkan harga/roll",onChange:r=>{const s=r.target.value.replace(/\D/g,"");l({...a,price:s})}},children:e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"Rp"})}),e.jsxs("div",{className:"flex items-center flex-col md:flex-row md:items-center gap-2",children:[e.jsxs(i,{variant:"wajib",labelFor:"height",labelText:"Panjang",error:t&&t.height?t.height:"",inputId:"height",inputProps:{value:a.height,name:"height",type:"text",placeholder:"20",onChange:S},children:[e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  left-2.5",children:"P"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"m"})]}),e.jsx("div",{className:"mt-1",children:e.jsx(y,{variant:"wajib",optionName:"pilih lebar",htmlFor:"product_id",labelName:"Lebar",optionMap:L.map((r,s)=>e.jsxs("option",{value:r.valueOf(),children:[r.valueOf()," m"]},s)),errors:t.width,selectOptionProps:{value:a.width,name:"width",type:"number",onChange:F}})}),e.jsxs(i,{labelFor:"range",labelText:"Ukuran Roll",error:t&&t.range?t.range:"",inputId:"range",inputProps:{disabled:!0,value:a.range,name:"range",type:"text",placeholder:"hasil dari P x L "},children:[e.jsx(v,{className:"size-5 text-gray-600 absolute z-10 top-2.5  left-2.5"})," ",e.jsx("span",{className:"size-5 text-gray-600 absolute z-10 top-2  right-2.5",children:"m2"})]})]})]}),e.jsx(y,{variant:"wajib",optionName:"Pilih Sub Kategori Produk",htmlFor:"sub_product_category_id",labelName:"Sub Kategori Produk",optionMap:k.map((r,s)=>e.jsx("option",{value:r.id,children:r.name},s)),errors:t.sub_product_category_id,selectOptionProps:{name:"sub_product_category_id",value:a.sub_product_category_id,onChange:r=>{l({...a,sub_product_category_id:r.target.value})}}}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("div",{className:`flex flex-col gap-2 mt-2 ${a.image?"w-1/2":"w-full"}`,children:[e.jsxs("span",{className:"text-sm",children:["Foto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("label",{htmlFor:"image",className:"flex items-center cursor-pointer gap-2 hover:bg-slate-100 transform duration-300 flex-col justify-center p-16 bg-white border border-dashed rounded-lg border-gray-500",children:[e.jsx("input",{type:"file",id:"image",className:"hidden",onChange:z}),e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"size-16 text-gray-400"}),e.jsx("span",{className:"text-gray-400 font-medium",children:"Upload Gambar (JPG, PNG, atau GIF)"})]})]})]}),a.image&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-2 mt-2 w-1/2",children:[e.jsx("span",{className:"text-sm",children:"Preview File"}),e.jsxs("div",{className:"flex items-center rounded-xl justify-between p-2 border bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3  rounded-xl ",children:[b&&e.jsx("img",{className:"size-24 object-cover rounded-xl ",src:b,alt:""}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{children:a.image.name}),e.jsxs("p",{children:[a.image.size," bytes"]})]})]}),e.jsx("button",{type:"button",onClick:()=>{d(null),l({...a,image:null});const r=document.getElementById("image");r&&(r.value="")},children:e.jsx(G,{className:"size-6 text-red-500"})})]})]})})]}),e.jsx(g,{message:t.image}),e.jsxs("div",{className:"flex items-center justify-end gap-2 ",children:[e.jsx(f,{type:"reset",variant:"outline",size:"lg",className:" border-black",children:"Reset"}),e.jsx(f,{type:"submit",disabled:x,variant:"default",size:"lg",children:x?e.jsx(H,{}):e.jsx("span",{children:"Simpan"})})]})]})})};export{ne as default};
